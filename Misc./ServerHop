if not IrisNotificationMrJack then
	loadstring(game:HttpGet"https://raw.githubusercontent.com/thedragonslayer2/hey/main/Misc./iris%20notification%20function")()
elseif IrisNotificationUserMrJack then IrisNotificationUserMrJack.ClearAllNotifications() end
warn"Looking For A Server"
IrisNotificationMrJack(1, "Notification", "Looking For A Server", 2)
local goodserver, GotServers = nil, { game.JobId }
local gamelink, data_table = "https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Asc&limit=100"
pcall(function()
	if not isfolder"MrJack Settings" then makefolder"MrJack Settings" end
	GotServers = game:GetService"HttpService":JSONDecode(readfile"MrJack Settings/ServerHop.json")
end)

local function savefile()
	pcall(function()
		writefile("MrJack Settings/ServerHop.json", game:GetService"HttpService":JSONEncode(GotServers))
	end)
end

function serversearch()
	data_table = game:GetService"HttpService":JSONDecode(game:HttpGetAsync(gamelink))
	for _, v in pairs(data_table.data) do
		pcall(function()
			if type(v) == "table" and tonumber(v.maxPlayers) > tonumber(v.playing) and v.id ~= game.JobId and not table.find(GotServers, v.id) then
				goodserver = v.id
				warn("Server Found " .. v.id)
				IrisNotificationMrJack(1, "Notification", "Teleporting To Server\n" .. v.id, 5)
				table.insert(GotServers, v.id)
				savefile()
				game:GetService"TeleportService":TeleportToPlaceInstance(game.PlaceId, goodserver)
				wait(6)
			end
		end)
	end
end

function getservers()
	pcall(serversearch)
	for i, v in pairs(data_table) do
		if i == "nextPageCursor" then
			if gamelink:find"&cursor=" then
				local a = gamelink:find"&cursor="
				local b = gamelink:sub(a)
				gamelink = gamelink:gsub(b, "")
			end
			gamelink = gamelink .. "&cursor=" .. v
			pcall(getservers)
		end
	end
end

if not table.find(GotServers, game.JobId) then table.insert(GotServers, game.JobId) end
pcall(getservers)
if goodserver == nil then
	GotServers = { game.JobId }
	pcall(getservers)
end
if goodserver == nil then
	warn"Server Hop Failed"
	IrisNotificationMrJack(1, "Notification", "No Server Found", 2)
end
return true
